{% extends 'base.html' %}

{% block title %}Add Servidor{% endblock %}

{% block content %}
  <h1>Add Servidor</h1>

  <form action="{{ url_for('add_servidor') }}" method="post">
    <label for="cpf">CPF:</label>
    <input type="text" id="cpf" name="cpf" required>
    <label for="nome">Nome:</label>
    <input type="text" id="nome" name="nome" required>
    <label for="tipo_contrato">Tipo de Contrato:</label>
    <input type="text" id="tipo_contrato" name="tipo_contrato" required>
    <label for="codigo_departamento">Departamento:</label>
    <select id="codigo_departamento" name="codigo_departamento" required>
      {% for departamento in departamentos %}
        <option value="{{ departamento.codigo }}">{{ departamento.nome }}</option>
      {% endfor %}
    </select>
    <label for="tipo_servidor">Tipo de Servidor:</label>
    <select id="tipo_servidor" name="tipo_servidor" required onchange="showFields()">
      <option value="docente">Docente</option>
      <option value="tecnico">TÃ©cnico Administrativo</option>
      <option value="terceirizado">Terceirizado</option>
    </select>

    <div id="docente_fields">
      <label for="siape">SIAPE:</label>
      <input type="text" id="siape_docente" name="siape">
    </div>

    <div id="tecnico_fields" style="display:none;">
      <label for="siape">SIAPE:</label>
      <input type="text" id="siape_tecnico" name="siape">
      <label for="id_cargo">Cargo:</label>
      <select id="id_cargo_tecnico" name="id_cargo">
        {% for cargo in cargos %}
          <option value="{{ cargo.id }}">{{ cargo.nome }}</option>
        {% endfor %}
      </select>
    </div>

    <div id="terceirizado_fields" style="display:none;">
      <label for="id_cargo">Cargo:</label>
      <select id="id_cargo_terceirizado" name="id_cargo">
        {% for cargo in cargos %}
          <option value="{{ cargo.id }}">{{ cargo.nome }}</option>
        {% endfor %}
      </select>
    </div>

    <button type="submit">Add</button>
  </form>

  <script>
    function showFields() {
      var tipo_servidor = document.getElementById("tipo_servidor").value;
      if (tipo_servidor == "docente") {
        document.getElementById("docente_fields").style.display = "block";
        document.getElementById("tecnico_fields").style.display = "none";
        document.getElementById("terceirizado_fields").style.display = "none";
      } else if (tipo_servidor == "tecnico") {
        document.getElementById("docente_fields").style.display = "none";
        document.getElementById("tecnico_fields").style.display = "block";
        document.getElementById("terceirizado_fields").style.display = "none";
      } else if (tipo_servidor == "terceirizado") {
        document.getElementById("docente_fields").style.display = "none";
        document.getElementById("tecnico_fields").style.display = "none";
        document.getElementById("terceirizado_fields").style.display = "block";
      }
    }
  </script>
{% endblock %}
