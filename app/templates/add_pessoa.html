{% extends 'base.html' %}

{% block title %}Adicionar Pessoa{% endblock %}

{% block content %}
<h1>Adicionar Nova Pessoa</h1>
<p>Esta tela é para o cadastro de informações básicas. Para atribuir papéis de Aluno ou Servidor, use a tela "Atribuir Papel" após o cadastro.</p>

<form action="{{ url_for('add_pessoa') }}" method="post">

    <div class="form-section">
        <h2>Informações Básicas</h2>
        <div>
            <label for="cpf">CPF:</label>
            <input type="text" id="cpf" name="cpf" required>
        </div>
        <div>
            <label for="nome">Nome Completo:</label>
            <input type="text" id="nome" name="nome" required>
        </div>
        <div>
            <label for="nomesocial">Nome Social (Opcional):</label>
            <input type="text" id="nomesocial" name="nomesocial">
        </div>
    </div>

    <div class="form-section">
        <h2>Contatos</h2>
        <div id="emails-container">
            <label>E-mails:</label>
            <div class="email-entry">
                <input type="email" name="emails[]" placeholder="exemplo@dominio.com">
            </div>
        </div>
        <button type="button" onclick="addEmailInput()">Adicionar Outro E-mail</button>

        <div id="telefones-container" style="margin-top: 20px;">
            <label>Telefones:</label>
            <div class="telefone-entry">
                <input type="tel" name="telefones[]" placeholder="(00) 91234-5678">
            </div>
        </div>
        <button type="button" onclick="addTelefoneInput()">Adicionar Outro Telefone</button>
    </div>

    <div style="text-align: center; margin-top: 30px;">
        <button type="submit">Salvar Pessoa</button>
    </div>
</form>

<script>
// --- Dynamic Input Adders ---
function addEmailInput() {
    const container = document.getElementById('emails-container');
    const newEntry = document.createElement('div');
    newEntry.className = 'email-entry';
    newEntry.innerHTML = '<input type="email" name="emails[]" placeholder="exemplo@dominio.com"> <button type="button" onclick="this.parentElement.remove()">Remover</button>';
    container.appendChild(newEntry);
}

function addTelefoneInput() {
    const container = document.getElementById('telefones-container');
    const newEntry = document.createElement('div');
    newEntry.className = 'telefone-entry';
    newEntry.innerHTML = '<input type="tel" name="telefones[]" placeholder="(00) 91234-5678"> <button type="button" onclick="this.parentElement.remove()">Remover</button>';
    container.appendChild(newEntry);
}
</script>
{% endblock %}
